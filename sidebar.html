<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChromeChatï¼ˆä¾§è¾¹æ ï¼‰</title>
    <link rel="stylesheet" href="popup.css">
    <style>
        /* ä¾§è¾¹æ å¸¸è§å®½åº¦çº¦ä¸º 320-400pxï¼Œå…è®¸åœ¨ä¾§æ ä¸­æ›´å¥½å¸ƒå±€ */
        html, body { height: 100%; margin: 0; }
        .container { height: 100vh; box-sizing: border-box; }
        .chat-container { height: calc(100vh - 220px); overflow: auto; }
        .input-area { position: sticky; bottom: 0; background: #fff; padding: 8px; }
    </style>
</head>
<body>
    <!-- ç›´æ¥å¤ç”¨ popup.html çš„ä¸»ä½“ç»“æ„ -->
    <!-- ä¸ºä¾¿äºå¤ç”¨å’Œç»´æŠ¤ï¼Œè„šæœ¬ä»å¼•ç”¨ popup.jsï¼Œpopup.js ä¸­çš„ DOM æŸ¥è¯¢åº”å…¼å®¹ä¾§è¾¹æ å¸ƒå±€ -->
    <!-- ä¾§è¾¹æ æ¨¡å¼ä¸‹ body ä¼šè¢«åŠ ä¸Š sidebar ç±»ï¼ŒCSS å°†å…è®¸å…¶å®½åº¦éšæ³¨å…¥å®¹å™¨å˜åŒ– -->
    <div class="container glass-panel">
        <!-- é¡¶éƒ¨æ§åˆ¶æ ï¼šæ¨ªå‘æ’åˆ—åº”ç”¨å›¾æ ‡ã€è¿æ¥çŠ¶æ€ã€è®¾ç½®ã€ä¼šè¯å†å² -->
        <div class="header glass-panel">
            <div class="header-top horizontal-top">
                <div class="app-icon-area">
                    <img src="icons/icon48.png" alt="App" class="app-icon">
                </div>

                <div class="connection-status">
                    <span id="statusIndicator" class="status-indicator disconnected"></span>
                    <span id="statusText">æœªè¿æ¥</span>
                </div>

                <div class="header-actions">
                    <button id="settingsBtn" class="icon-btn" title="è®¾ç½®" aria-expanded="false" aria-controls="settingsPanel">
                        <img src="icons/s-tools.png" alt="è®¾ç½®" class="icon-settings-img" />
                    </button>
                    <div class="session-group">
                        <!-- å†å²ä¼šè¯æ”¹ä¸ºå›¾æ ‡æŒ‰é’®ï¼Œä¸è®¾ç½®æŒ‰é’®æ ·å¼ä¸€è‡´ï¼›ä¼šè¯åç§°ä¿ç•™ä¸ºæ— éšœç¢æ–‡æœ¬ -->
                        <button id="currentSessionBtn" class="icon-btn" title="ä¼šè¯å†å²" aria-expanded="false" aria-controls="sessionListPanel">
                            <img src="icons/files.png" alt="ä¼šè¯å†å²" class="icon-session-history-img" />
                            <span id="currentSessionText" class="sr-only">ä¼šè¯</span>
                        </button>
                        <div id="sessionListPanel" class="session-list hidden" aria-hidden="true"></div>
                        <div id="sessionMenu" class="session-menu hidden" aria-hidden="true">
                            <button class="session-menu-item" data-action="new"><span>â•</span> æ–°å»ºä¼šè¯</button>
                            <button class="session-menu-item" data-action="rename"><span>âœï¸</span> é‡å‘½å</button>
                            <button class="session-menu-item" data-action="export"><span>â¬‡ï¸</span> å¯¼å‡º</button>
                            <button class="session-menu-item danger" data-action="delete"><span>ğŸ—‘ï¸</span> åˆ é™¤</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è®¾ç½®é¢æ¿ -->
        <div id="settingsPanel" class="settings-panel hidden glass-panel">
            <div class="setting-item">
                <label for="ollamaUrl">OllamaæœåŠ¡åœ°å€:</label>
                <input type="text" id="ollamaUrl" placeholder="http://localhost:11434" value="http://localhost:11434">
            </div>
            <div class="setting-item">
                <label for="ollamaApiKey">Ollama API Key:</label>
                <input type="password" id="ollamaApiKey" placeholder="(å¯é€‰) ç”¨äºè®¿é—® https://ollama.com çš„ API Key">
            </div>
            <div class="setting-item">
                <label for="modelSelect">é€‰æ‹©æ¨¡å‹:</label>
                <select id="modelSelect">
                    <option value="">é€‰æ‹©æ¨¡å‹...</option>
                </select>
            </div>
            <div class="setting-item">
                <label class="checkbox-label"><input type="checkbox" id="enableStreaming" checked><span>å¯ç”¨æµå¼å“åº”</span></label>
                <div class="setting-description">å®æ—¶æ˜¾ç¤ºAIå›å¤ï¼Œæå‡äº¤äº’ä½“éªŒ</div>
            </div>
            <div class="setting-actions">
                <button id="testConnection" class="btn secondary">æµ‹è¯•è¿æ¥</button>
                <button id="saveSettings" class="btn primary">ä¿å­˜è®¾ç½®</button>
            </div>
        </div>

        <!-- å¯¹è¯åŒºåŸŸ -->
        <div id="chatContainer" class="chat-container glass-panel">
            <div class="chat-wrapper">
                <div class="chat-main">
                    <div id="messages" class="messages"></div>
                </div>
                <div class="chat-toolbar" aria-label="å¯¹è¯å·¥å…·æ ">
                    <div class="toolbar-item">
                        <button id="fetchAndSendBtn" class="btn secondary" disabled title="ç½‘é¡µæ€»ç»“">
                            <img src="icons/document.png" alt="ç½‘é¡µæ€»ç»“" class="icon-summary-img" />
                        </button>
                        <span class="toolbar-label">ç½‘é¡µæ€»ç»“</span>
                    </div>
                    <!-- é¢„ç•™ä½ç½®ï¼šæ›´å¤šå·¥å…·æŒ‰é’® -->
                    <div class="toolbar-item">
                        <button id="toolBtn1" class="btn secondary" title="å·¥å…·1">
                            <img src="icons/Language.png" alt="å·¥å…·1" class="icon-tool1-img" />
                        </button>
                        <span class="toolbar-label">å·¥å…·1</span>
                    </div>
                    <div class="toolbar-item">
                        <button id="toolBtn2" class="btn secondary" title="å·¥å…·2">
                            <img src="icons/star.png" alt="å·¥å…·2" class="icon-tool2-img" />
                        </button>
                        <span class="toolbar-label">å·¥å…·2</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer-info">
            <div class="model-context"><span id="modelContextLabel">æ¨¡å‹ä¸Šä¸‹æ–‡:</span><span id="modelContextValue">æœªçŸ¥</span></div>
            <div class="estimate"><span id="estimateLabel">é¢„è®¡ tokens:</span><strong id="nextTurnTokens">0</strong></div>
        </div>

        <div class="input-area glass-panel">
                <div class="input-container">
                    <textarea id="messageInput" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." rows="3"></textarea>
                    <div class="input-actions">
                        <button id="newSessionBtn" class="btn secondary" disabled>æ–°å»ºä¼šè¯</button>
                        <button id="sendMessage" class="btn primary" disabled>å‘é€</button>
                        <!-- åœæ­¢ç”ŸæˆæŒ‰é’®ï¼ˆé»˜è®¤éšè—ï¼‰ -->
                        <button id="stopMessageBtn" class="btn danger" style="display:none;" aria-label="åœæ­¢ç”Ÿæˆ">åœæ­¢</button>
                    </div>
                </div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>


