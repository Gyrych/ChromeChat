<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollama åŠ©æ‰‹ï¼ˆä¾§è¾¹æ ï¼‰</title>
    <link rel="stylesheet" href="popup.css">
    <style>
        /* ä¾§è¾¹æ å¸¸è§å®½åº¦çº¦ä¸º 320-400pxï¼Œå…è®¸åœ¨ä¾§æ ä¸­æ›´å¥½å¸ƒå±€ */
        html, body { height: 100%; margin: 0; }
        .container { height: 100vh; box-sizing: border-box; }
        .chat-container { height: calc(100vh - 220px); overflow: auto; }
        .input-area { position: sticky; bottom: 0; background: #fff; padding: 8px; }
    </style>
</head>
<body>
    <!-- ç›´æ¥å¤ç”¨ popup.html çš„ä¸»ä½“ç»“æ„ -->
    <!-- ä¸ºä¾¿äºå¤ç”¨å’Œç»´æŠ¤ï¼Œè„šæœ¬ä»å¼•ç”¨ popup.jsï¼Œpopup.js ä¸­çš„ DOM æŸ¥è¯¢åº”å…¼å®¹ä¾§è¾¹æ å¸ƒå±€ -->
    <div class="container glass-panel">
        <!-- é¡¶éƒ¨æ§åˆ¶æ  -->
        <div class="header glass-panel">
            <div class="header-top">
                <div class="connection-status">
                    <span id="statusIndicator" class="status-indicator disconnected"></span>
                    <span id="statusText">æœªè¿æ¥</span>
                </div>
                <div class="session-row">
                    <div class="session-group">
                        <button id="currentSessionBtn" class="btn secondary" title="ç®¡ç†ä¼šè¯">
                            <span id="currentSessionText">ä¼šè¯</span>
                            <span class="dropdown-arrow">â–¼</span>
                        </button>
                        <div id="sessionListPanel" class="session-list hidden"></div>
                        <div id="sessionMenu" class="session-menu hidden">
                            <button class="session-menu-item" data-action="new"><span>â•</span> æ–°å»ºä¼šè¯</button>
                            <button class="session-menu-item" data-action="rename"><span>âœï¸</span> é‡å‘½å</button>
                            <button class="session-menu-item" data-action="export"><span>â¬‡ï¸</span> å¯¼å‡º</button>
                            <button class="session-menu-item danger" data-action="delete"><span>ğŸ—‘ï¸</span> åˆ é™¤</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-bottom">
                <div class="model-row">
                    <select id="modelSelect">
                        <option value="">é€‰æ‹©æ¨¡å‹...</option>
                    </select>
                    <button id="settingsBtn" class="icon-btn">âš™ï¸</button>
                </div>
            </div>
        </div>

        <!-- è®¾ç½®é¢æ¿ -->
        <div id="settingsPanel" class="settings-panel hidden glass-panel">
            <div class="setting-item">
                <label for="ollamaUrl">OllamaæœåŠ¡åœ°å€:</label>
                <input type="text" id="ollamaUrl" placeholder="http://localhost:11434" value="http://localhost:11434">
            </div>
            <div class="setting-item">
                <label for="ollamaApiKey">Ollama API Key:</label>
                <input type="password" id="ollamaApiKey" placeholder="(å¯é€‰) ç”¨äºè®¿é—® https://ollama.com çš„ API Key">
            </div>
            <div class="setting-item">
                <label class="checkbox-label"><input type="checkbox" id="enableStreaming" checked><span>å¯ç”¨æµå¼å“åº”</span></label>
                <div class="setting-description">å®æ—¶æ˜¾ç¤ºAIå›å¤ï¼Œæå‡äº¤äº’ä½“éªŒ</div>
            </div>
            <div class="setting-actions">
                <button id="testConnection" class="btn secondary">æµ‹è¯•è¿æ¥</button>
                <button id="saveSettings" class="btn primary">ä¿å­˜è®¾ç½®</button>
            </div>
        </div>

        <!-- å¯¹è¯åŒºåŸŸ -->
        <div id="chatContainer" class="chat-container glass-panel">
            <div id="messages" class="messages"></div>
        </div>

        <div class="footer-info">
            <div class="model-context"><span id="modelContextLabel">æ¨¡å‹ä¸Šä¸‹æ–‡:</span><span id="modelContextValue">æœªçŸ¥</span></div>
            <div class="estimate"><span id="estimateLabel">é¢„è®¡ tokens:</span><strong id="nextTurnTokens">0</strong></div>
        </div>

        <div class="input-area glass-panel">
            <div class="input-container">
                <textarea id="messageInput" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." rows="3"></textarea>
                <div class="input-actions">
                    <button id="newSessionBtn" class="btn secondary" disabled>æ–°å»ºä¼šè¯</button>
                    <button id="fetchAndSendBtn" class="btn secondary" disabled>ç½‘é¡µæ€»ç»“</button>
                    <button id="sendMessage" class="btn primary" disabled>å‘é€</button>
                </div>
            </div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>


